:javascript
  $(document).ready(function () {
    var msgPack = {
      "confirm": "Do you confirm the disease?",
      "disease": "I got influenza"
    };
    if (document.URL.match("locale=jp")) {
      msgPack = {
        "confirm": "本当に？お大事に…",
        "disease": "インフルエンザになりました"
      };
    } else if (document.URL.match("locale=fr")) {
      msgPack = {
        "confirm": "Confirmez-vous avoir la grippe?",
        "disease": "J'ai la grippe"
      };
    }
    var evt = document.querySelector('#coming-out');
    if (evt) {
      evt.onclick = function () { return confirm(msgPack.confirm); };
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        var lat = document.querySelector("#latitude");
        var lon = document.querySelector("#longitude");
        if (21 < position.coords.latitude && position.coords.latitude < 49
          && 121 < position.coords.longitude && position.coords.longitude < 149) {
          if (lat)
            lat.value = position.coords.latitude;
          if (lon)
            lon.value = position.coords.longitude;
        } else {
          if (lat)
            lat.value = 35.632291;
          if (lon)
            lon.value = 139.881371;
        }
        if (lat.value != '' && lon.value != '') {
          $(evt).removeAttr("disabled");
          evt.value = msgPack.disease;
        }
      });
    }

  });

%h1
  = I18n.t('inform.title')

%p
  = I18n.t('inform.explanation')

%form{action: 'event', method: :post}
  %input{type: :hidden, name: :event_type, value: :influenza}
  %input{type: :hidden, name: :lat, value: '', id: :latitude}
  %input{type: :hidden, name: :lon, value: '', id: :longitude}
  %input{type: :submit, value: I18n.t('inform.search_location'), id: 'coming-out', disabled: true}
%p
  = I18n.t('inform.thanks')
%hr
%ul
  %li
    = link_to I18n.t('navigation.map'), hazard_path
  %li
    = link_to I18n.t('navigation.events'), events_path
  %li
    = link_to I18n.t('navigation.home'), root_path

%hr
= render(partial: 'partials/footlinks', locals: { controller: :home, action: :inform})

