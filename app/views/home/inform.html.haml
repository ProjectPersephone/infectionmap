:javascript
  $(document).ready(function () {
    var msgPack = {
      "confirm": "Do you confirm the disease?",
      "button": "Inform"
    };
    if (document.URL.match("locale=jp")) {
      msgPack = {
        "confirm": "本当に？お大事に…",
        "button": "申告"
      };
    } else if (document.URL.match("locale=fr")) {
      msgPack = {
        "confirm": "Confirmez-vous la contraction?",
        "button": "Enregistrer"
      };
    }
    var button = document.querySelector('#button');
    if (button) {
      button.onclick = function () { return confirm(msgPack.confirm); };
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        var lat = document.querySelector("#latitude");
        var lon = document.querySelector("#longitude");
        if (21 < position.coords.latitude && position.coords.latitude < 49
          && 121 < position.coords.longitude && position.coords.longitude < 149) {
          if (lat)
            lat.value = position.coords.latitude;
          if (lon)
            lon.value = position.coords.longitude;
        } else {
          if (lat)
            lat.value = 35.632291;
          if (lon)
            lon.value = 139.881371;
        }
        if (lat.value != '' && lon.value != '') {
          $(button).removeAttr("disabled");
          button.value = msgPack.button;
        }
      });
    }

  });

%p
  = I18n.t('inform.explanation')

%form{action: 'event', method: :post}
  %input{type: :hidden, name: :locale, value: I18n.locale}
  %select{name: :disease}
    %option{value: :influenza}
      = I18n.t 'disease.influenza'
    %option{value: :dengue}
      = I18n.t 'disease.dengue'
  %input{type: :hidden, name: :lat, value: '', id: :latitude}
  %input{type: :hidden, name: :lon, value: '', id: :longitude}
  %input{type: :submit, value: I18n.t('inform.search_location'), id: 'button', disabled: true}

%p
  = I18n.t('inform.thanks')

